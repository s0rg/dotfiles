#vim:ft=bash

## aliases

# eye-candy output
alias ls='ls --color=auto --group-directories-first'
alias ip='ip -color=auto'
alias diff='diff --color=auto'
alias dmesg='dmesg --color=auto'
alias grep='grep --color=auto'
alias egrep='egrep --color=auto'
alias fgrep='fgrep --color=auto'
alias less='less -R'
alias ncdu='ncdu --color dark'

# misc
alias v='vim'
alias mc='mc -d'
alias si='sudo -i'
alias cls='clear'
alias tailf='tail -f --retry'
alias wttr='curl http://wttr.in/?format="%c:+%f+%w\n"'
alias ru-tran='trans :ru'
alias cal='echo; ncal -M -3; echo'
alias clip="xclip -sel clip"

# python
alias bp='bpython'
alias py='python3'
alias py-serve='python3 -m http.server'
alias pip-up='pip3 install -U --user $(pip3 list --user --format json | jq ".[] | flatten | .[0]" | xargs echo)'

# youtube-dl
alias yta="youtube-dl --extract-audio --audio-format best"
alias ytv="youtube-dl -f bestvideo+bestaudio"

# extras
alias tree='exa --icons --group-directories-first --tree --level=2 --git-ignore'
alias lsx='exa --icons --group-directories-first --long --header --git --colour-scale --time-style=long-iso'
alias df='duf --hide special'

# docker
alias dci-up="docker images -f 'dangling=false' --format '{{.Repository}}:{{.Tag}}' | xargs -L1 docker pull"
alias dci-clr="docker images -f 'dangling=true' -q | xargs -L1 docker rmi"
alias dcu='docker-compose up'
alias dcd='docker-compose down'

# golang
alias go-clean='go clean -cache -testcache -modcache'
alias cdgo='cd $GOPATH/src/github.com/$USER'

# git
alias git-gc='git reflog expire --all --expire=now && git gc --prune=now --aggressive'
alias git-born='git log --pretty="format:%ar at %ai" --reverse | head -1'
alias git-origin='git remote show origin'
alias git-prune='git fetch --prune origin'

# kitty
source <(kitty + complete setup bash)
alias kitty-up='curl -L https://sw.kovidgoyal.net/kitty/installer.sh | sh /dev/stdin'
alias ssh='kitty +kitten ssh'
alias kcat='kitty +kitten icat'

# dotfiles
alias dotfiles='git --git-dir=$HOME/.dotfiles/ --work-tree=$HOME'
# add auto-complete
complete -W "add status commit push log checkout diff" dotfiles

## functions

# create a new directory and enter it
mkd() { mkdir -p "$@" && cd "$@" || exit; }

# `opn` with no arguments opens the current directory,
# otherwise opens the given location or file
opn() {
    if [ $# -eq 0 ]; then
        xdg-open . > /dev/null 2>&1
    else
        xdg-open "$@" > /dev/null 2>&1
    fi
}
